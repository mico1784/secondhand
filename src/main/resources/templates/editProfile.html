<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>í”„ë¡œí•„ ìˆ˜ì •</title>
  <link href="/css/profileEdit.css" rel="stylesheet">
  <link rel="icon" type="image/jpg" href="/images/logo.jpg" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <script src="/js/nav.js" defer></script>
</head>
<body>
<div id="container">

  <h2>í”„ë¡œí•„ ìˆ˜ì •</h2>

  <div id="error-message">
    <p th:if="${errorMessage}" th:text="${errorMessage}"></p>
  </div>

  <form action="/editProfile" method="POST" enctype="multipart/form-data">
    <label for="profileImage">í”„ë¡œí•„ ì‚¬ì§„</label>
    <input type="file" id="profileImage" name="profileImage" accept="image/*" onchange="previewProfilePicture(event)">
    <img id="profile-picture-preview" class="profile-picture" style="width: 300px; height: 300px; object-fit: cover; display: none;">

    <label for="name">ë‹‰ë„¤ì„</label>
    <input type="text" id="name" name="name" th:value="${user.name}">

    <label for="password">ë¹„ë°€ë²ˆí˜¸ <span class="password-toggle" onclick="togglePasswordVisibility()">ğŸ‘ï¸</span></label>
    <input type="password" id="password" name="password" minlength="8" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•˜ë ¤ë©´ ì…ë ¥í•˜ì„¸ìš”">

    <label for="email">ì´ë©”ì¼</label>
    <input type="email" id="email" name="email" th:value="${user.email}">

    <label for="age">ë‚˜ì´</label>
    <input type="text" id="age" name="age" th:value="${user.age}">

    <label for="phoneNumber">ì „í™”ë²ˆí˜¸</label>
    <input type="tel" id="phoneNumber" name="phoneNumber" th:value="${user.phoneNumber}">

    <label for="gender">ì„±ë³„</label>
    <select id="gender" name="gender" th:value="${user.gender}">
      <option value="male" th:selected="${user.gender == 'male'}">ë‚¨ì„±</option>
      <option value="female" th:selected="${user.gender == 'female'}">ì—¬ì„±</option>
      <option value="other" th:selected="${user.gender == 'other'}">ê¸°íƒ€</option>
    </select>

    <label for="address">ì£¼ì†Œ</label>
    <input type="text" id="address" name="address" th:value="${user.address}">

    <label for="social-media">ì†Œì…œ ë¯¸ë””ì–´ ë§í¬</label>
    <input type="url" id="social-media" name="socialMedia" placeholder="https://instagram.com/username">

    <input type="submit" id="submit-button" value="ìˆ˜ì •">
  </form>

</div>

<script>
  // í”„ë¡œí•„ ì‚¬ì§„ ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥
  function previewProfilePicture(event) {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        const preview = document.getElementById('profile-picture-preview');
        preview.src = e.target.result;
        preview.style.display = 'block'; // ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë˜ë©´ ë³´ì´ê²Œ ì„¤ì •
        preview.style.width = '300px';
        preview.style.height = '300px';
        preview.style.objectFit = 'cover';
      };
      reader.readAsDataURL(file);
    }
  }

  // ë¹„ë°€ë²ˆí˜¸ ë³´ì´ê¸° ê¸°ëŠ¥
  function togglePasswordVisibility() {
    const passwordField = document.getElementById('password');
    if (passwordField.type === 'password') {
      passwordField.type = 'text';
    } else {
      passwordField.type = 'password';
    }
  }
</script>
</body>
</html>
